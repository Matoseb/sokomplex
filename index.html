<!DOCTYPE html>
<html lang="en">

<head>
    <title>ùóåùóàùóÑùóàùóÜùóâùóÖùñæùóë</title>
    <!-- <meta name="viewport" content="width=device-width"> -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Sokomplex" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="google" content="notranslate" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#7a7a7a">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#3e3e3e">
    <style>
        html, body {
			background: black;
			bottom: 0;
        	color: white;
        	font-family: sans-serif;
			image-rendering: pixelated;
			left: 0;
			right: 0;
			margin: 0;
			overflow: hidden;
        	position: fixed;
			top: 0;
			touch-action: manipulation;

			-webkit-user-select: none;  /* Chrome all / Safari all */
  			-moz-user-select: none;     /* Firefox all */
  			-ms-user-select: none;      /* IE 10+ */
  			user-select: none;          /* Likely future */      
		}

		#info {
			position: absolute;
			top: 0px;
			width: 100%;
			padding: 5px;
		}

		#webglmessage {
			align-items: center;
			display: flex;
			height: 100%;
			font-size: 12pt;
			justify-content: center;
			position: absolute;
			opacity: 0;
			transition: opacity 1s;
			text-align: center;
			width: 100%;
		}

		#notSupported {
			height: 100%;
			width: 100%;
		}

		#cheat {
			position: fixed;
    	top: 50%;
    	left: 50%;
    	transform: translate(-50%, -50%);
        --w: 70vmin;
        outline: 0;
    }

    input {
        box-sizing: border-box;
        padding: 10px;
        display: inline-block;
        width: var(--w);
        border: 0;
        color: white;
        background: transparent;
        outline: none;
        font-size: initial;
        text-align: center;
        /*margin-bottom: 1.2em;*/
    }

    #cheat:focus-within input {
        background: rgba(255, 255, 255, .1);
    }

    #keypad {
    	display: none;
        position: relative;
        user-select: none;
        width: var(--w);
        height: var(--w);
        grid-template-areas: "key7 key8 key9 refresh"
            "key4 key5 key6 delete"
            "key1 key2 key3 enter"
            "key0 key0 mute enter";
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr 1fr 1fr;
    }

    .key {
        font-family: sans-serif;
        color: white;
        display: flex;
        align-items: center;
        background: transparent;
        justify-content: center;
        transition: background-color 0.1s;
    }

    .key:hover {
        background: rgba(255, 255, 255, .1);
    }

    .key:hover:active {
        background: rgba(255, 255, 255, .2);
    }

    .refresh {
        grid-area: refresh;
    }

    .delete {
        grid-area: delete;
    }

    .enter {
        grid-area: enter;
    }

    .mute {
        grid-area: mute;
    }

    ._1 {
        grid-area: key1;
    }

    ._2 {
        grid-area: key2;
    }

    ._3 {
        grid-area: key3;
    }

    ._4 {
        grid-area: key4;
    }

    ._5 {
        grid-area: key5;
    }

    ._6 {
        grid-area: key6;
    }

    ._7 {
        grid-area: key7;
    }

    ._8 {
        grid-area: key8;
    }

    ._9 {
        grid-area: key9;
    }

    ._0 {
        grid-area: key0;
    }

		#container {
			bottom: 0;
			left: 0;
			position: fixed;
			right: 0;
			top: 0;
        	touch-action: manipulation;
			transition: opacity 0.5s;
			z-index: 1;
			-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  			/*opacity: 1;*/
		}

	</style>
</head>

<body>
    <!-- onclick used to prevent touch-action -->
    <div id="container" onclick></div>
    <!-- <input type="text" value="" autocomplete="off"> -->
    <div id="cheat" tabindex="-1">
        <input type="text" name="">
        <div id="keypad" style="">
            <div class="key _7">7</div>
            <div class="key _8">8</div>
            <div class="key _9">9</div>
            <div class="key refresh">reload</div>
            <div class="key _4">4</div>
            <div class="key _5">5</div>
            <div class="key _6">6</div>
            <div class="key delete">delete</div>
            <div class="key _1">1</div>
            <div class="key _2">2</div>
            <div class="key _3">3</div>
            <div class="key enter">enter</div>
            <div class="key _0">0</div>
            <div class="key mute">mute</div>
        </div>
    </div>
    <script src="js/libs/three.min.js"></script>
    <script src="js/libs/WebGL.js"></script>
    <script src="js/libs/stats.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/utilities.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/save.js"></script>
    <script src="js/objects.js"></script>
    <script src="js/teleport.js"></script>
    <script src="js/blockactions.js"></script>
    <script id="vertexShader" type="x-shader/x-vertex">
        precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;
		uniform float fogHeight;
		uniform float currTime;
		uniform float depthFactor;
		// uniform vec3 downForce[1];

		uniform float forces[5];		//[mouse 3d x, mouse 3d y, force x, force y, force z]

		const float sq256 = 256. * 256.;

		const float sq461 = 512. * 512.;

		const float mag = 4.;

		attribute vec3 vertexPos;	//posistion of vertices
		attribute vec2 uv;
		
		attribute vec3 _pos;
		attribute vec3 pos;

		attribute float _col;
		attribute float col;

		attribute float _time;
		attribute float speed;

		varying vec2 vUv;
		varying vec3 vColors;
		varying float vPosY;

    	// float easeOutCubic (float t) {return (--t)*t*t+1.0;}
		float easeOutQuad (const in float t) { return t*(2.0-t); }

		float sq (const in float n) { return n*n; }

		vec3 unpackColor(const in float f) {
		    vec3 color;
		    color.b = floor(f / sq461);
		    float tmp = f - color.b * sq461;
		    color.g = floor(tmp / 512.);
		    color.r = floor(tmp - color.g * 512.);
		    return color / 255.;
		}

		void main() {
			vUv = uv;
			
			vec3 col_ = unpackColor(col);
			vec3 _col_ = unpackColor(_col);
			vec3 vPos = vertexPos;

			//interpolation
			float eased = easeOutQuad(clamp((currTime - _time)/speed,0.,1.));

			vec3 easedPos = (pos - _pos) * eased + _pos;
			float forceAmt = -(sq(easedPos.x - forces[0]) + sq(easedPos.z - forces[1])) / sq(mag * forces[3]);

			vPos += easedPos - vec3(forces[2], forces[3], forces[4]) * pow(2.,forceAmt);
			vColors = (col_ - _col_) * eased + _col_;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos, 1. );
           			
			vPosY = easeOutQuad(abs(fogHeight - vPos.y)/depthFactor);
		}

	</script>
    <script id="fragmentShader" type="x-shader/x-fragment">
        precision highp float;

		uniform sampler2D map;
		varying vec2 vUv;
		varying float vPosY;
		varying vec3 vColors;

		void main() {
			gl_FragColor = vec4(vColors * texture2D(map, vUv).rgb - vPosY,1.);
		}
	</script>
    <script src="js/main.js"></script>
</body>

</html>